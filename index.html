<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="theme-color" content="#111111" />
<title>내부품질 기한관리</title>
<link rel="manifest" href="manifest.webmanifest">

<style>
:root { --text:#f3f4f6; --muted:#b8bcc6; --line:#262a3a; --accent:#7c3aed; }

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont;
  background:#0f1115;
  color:var(--text);
  padding:18px;
}

.card{
  background:#1b1f27;
  border-radius:18px;
  padding:16px;
  box-shadow:0 8px 20px rgba(0,0,0,0.4);
}

.row{
  display:flex;
  justify-content:space-between;
  padding:10px 0;
  border-bottom:1px solid #2b2f3a;
}

input,button{
  padding:8px 10px;
  border-radius:10px;
  border:none;
  font-size:14px;
}

button{
  background:var(--accent);
  color:white;
  margin-left:6px;
}

.dow-0{color:#ff4d4d}
.dow-1{color:#ff8c42}
.dow-2{color:#ffd43b}
.dow-3{color:#4cd964}
.dow-4{color:#4dabf7}
.dow-5{color:#364fc7}
.dow-6{color:#b197fc}
</style>
</head>

<body>

<h2>내부품질 기한관리</h2>

<div class="card">
<input type="date" id="date">
<button id="todayBtn">오늘</button>
<button id="copyBtn">복사</button>

<div id="result" style="margin-top:10px"></div>
</div>

<script>
const WEEK=["일","월","화","수","목","금","토"];

function fmt(d){
  const y=d.getFullYear();
  const m=(d.getMonth()+1).toString().padStart(2,"0");
  const da=d.getDate().toString().padStart(2,"0");
  const w=d.getDay();
  return `${y}.${m}.${da} (<span class="dow-${w}">${WEEK[w]}</span>)`;
}

function addDays(base,n){
  const d=new Date(base);
  d.setDate(d.getDate()+n-1);
  return d;
}

function addMonth(base,m){
  const d=new Date(base);
  d.setMonth(d.getMonth()+m);
  d.setDate(d.getDate()-1);
  return d;
}

function render(base){
  const list=[
    ["2일 뒤",addDays(base,2)],
    ["3일 뒤",addDays(base,3)],
    ["5일 뒤",addDays(base,5)],
    ["7일 뒤",addDays(base,7)],
    ["14일 뒤",addDays(base,14)],
    ["한달 뒤",addMonth(base,1)],
    ["3달 뒤",addMonth(base,2)]
  ];

  const r=document.getElementById("result");
  r.innerHTML="";
  list.forEach(v=>{
    r.innerHTML+=`<div class="row"><span>${v[0]}</span><span>${fmt(v[1])}</span></div>`;
  });
}

const input=document.getElementById("date");

document.getElementById("todayBtn").onclick=()=>{
  const t=new Date();
  input.value=t.toISOString().split("T")[0];
  render(t);
};

document.getElementById("copyBtn").onclick=()=>{
  navigator.clipboard.writeText(document.getElementById("result").innerText);
  alert("복사됨");
};

input.addEventListener("change",e=>{
  const [y,m,d]=e.target.value.split("-");
  render(new Date(y,m-1,d));
});

const today=new Date();
input.value=today.toISOString().split("T")[0];
render(today);

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("./sw.js");
}
</script>

</body>
</html>
